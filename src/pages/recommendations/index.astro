---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

const recommendations = await getCollection('recommendations');
---

<Layout title="המלצות טיולים בפוארטו ויאחו">
    <section class="recommendations-header container">
        <h1>המלצות טיולים בפוארטו ויאחו</h1>
        <p>טבע פראי, חופים קסומים ואטרקציות מקומיות שלא כדאי לפספס.</p>
    </section>

    <section class="container recommendations-grid">
        {recommendations.length > 0 ? (
            recommendations.map(reco => (
                <article class="reco-card">
                    {reco.data.imageGallery && reco.data.imageGallery.length > 0 && (
                        <div class="reco-image-wrapper">
                            <Image src={reco.data.imageGallery[0]} alt={reco.data.title} width={600} height={400} class="reco-image" />
                        </div>
                    )}
                    <div class="reco-content">
                        <h2>{reco.data.title}</h2>
                        <a href={`/recommendations/${reco.data.slug}`} class="button button-primary details-link">קרא עוד</a>
                    </div>
                </article>
            ))
        ) : (
            <p class="no-reco">בקרוב יעלו המלצות חדשות!</p>
        )}
    </section>
</Layout>

<style>
    .recommendations-header {
        padding-block: 4rem 2rem;
        text-align: center;
    }

    .recommendations-grid {
        display: grid;
        gap: 2rem;
        grid-template-columns: 1fr;
        padding-block-end: 4rem;
    }

    @media (min-width: 768px) {
        .recommendations-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (min-width: 1024px) {
        .recommendations-grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    .reco-card {
        background-color: var(--color-white);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        border: 1px solid var(--color-sand);
        display: flex;
        flex-direction: column;
    }

    .reco-image-wrapper {
        width: 100%;
        height: 250px;
        overflow: hidden;
    }

    .reco-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .reco-content {
        padding: 1.5rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: flex-start;
    }
    
    .reco-content h2 {
        margin-block-end: 1rem;
        font-size: 1.25rem;
    }

    .details-link {
        margin-block-start: auto;
    }

    .no-reco {
        text-align: center;
        grid-column: 1 / -1;
        font-size: 1.1rem;
        color: var(--color-warm-wood);
    }
</style>
