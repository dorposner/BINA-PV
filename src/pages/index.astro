---
import Layout from '../layouts/Layout.astro';
import EventCard from '../components/EventCard.astro';
import { getCollection } from 'astro:content';

const events = await getCollection('events');
// Sort by date ascending
const sortedEvents = events.sort((a, b) => a.data.date.valueOf() - b.data.date.valueOf());
---

<Layout title="ראשי">
    <section class="hero">
        <div class="container hero-content">
            <h1>הבית הישראלי-יהודי שלכם בקוסטה ריקה</h1>
            <p>מוזמנים להצטרף אלינו לפעילויות, ארוחות שבת, סדנאות ועוד בלב פוארטו ויאחו.</p>
            <a href="#schedule" class="button button-primary cta-button">ללוח האירועים שלנו</a>
        </div>
        <div class="hero-overlay"></div>
    </section>

    <section id="about" class="about-section">
        <div class="container">
            <h2>אודותינו</h2>
            <p>
                ברוכים הבאים לבית קהילת BINA בפוארטו ויאחו, המרכז המחבר בין טבע עוצר נשימה בקוסטה ריקה
                לאווירה של בית ישראלי ויהודי חם. אנו מזמינים תיירים, מתנדבים וחברי קהילה לקחת חלק בעשייה,
                שמירת השבת וארוחות משותפות. חוויה שכולה חיבור, התחדשות, ונתינה באווירה קסומה.
            </p>
        </div>
    </section>

    <section id="schedule" class="schedule-section">
        <div class="container">
            <h2>לוח אירועים שבועי</h2>
            <div class="events-grid">
                {sortedEvents.length > 0 ? (
                    sortedEvents.map(event => (
                        <EventCard event={event} />
                    ))
                ) : (
                    <p>לא נמצאו אירועים קרובים כרגע.</p>
                )}
            </div>
        </div>
    </section>

    <section id="shabbat-passover" class="shabbat-section">
        <div class="container shabbat-container">
            <div class="shabbat-content">
                <h2>שבת וחגים בבית BINA</h2>
                <p>
                    מזמינים אתכם לחגוג איתנו את השבת ואת חגי ישראל (כולל פסח מתקרב!) באווירה המיוחדת של קוסטה ריקה.
                    אנא הירשמו מראש כדי שנוכל להיערך בהתאם.
                </p>
                <div class="shabbat-actions">
                    <a href="https://example.com/shabbat-payment" class="button button-primary" target="_blank" rel="noopener noreferrer">הזמנת ארוחת שבת</a>
                    <a href="https://example.com/passover-payment" class="button" target="_blank" rel="noopener noreferrer">הרשמה לפסח</a>
                </div>
            </div>
        </div>
    </section>
</Layout>

<style>
    .hero {
        position: relative;
        background-color: var(--color-jungle-green);
        background-image: url('https://images.unsplash.com/photo-1549449852-6aed981a8fe9?q=80&w=2670&auto=format&fit=crop'); /* Placeholder landscape, highly optimized Costa Rica jungle */
        background-size: cover;
        background-position: center;
        min-height: 80vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: var(--color-white);
        margin-block-start: -1px; /* Overlap header box-shadow */
    }

    .hero-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(46, 79, 43, 0.6); /* Jungle green with opacity */
        z-index: 1;
    }

    .hero-content {
        position: relative;
        z-index: 2;
        max-width: 800px;
    }

    .hero h1 {
        font-size: 2.5rem;
        margin-block-end: 1rem;
        color: var(--color-white);
        line-height: 1.2;
    }

    .hero p {
        font-size: 1.25rem;
        margin-block-end: 2rem;
    }

    .cta-button {
        font-size: 1.25rem;
        padding: 1rem 2rem;
    }

    .about-section {
        padding-block: 4rem;
        text-align: center;
        background-color: var(--color-white);
    }

    .about-section p {
        max-width: 700px;
        margin-inline: auto;
        font-size: 1.1rem;
        line-height: 1.6;
    }

    .schedule-section {
        padding-block: 4rem;
        background-color: var(--color-sand-light);
    }

    .events-grid {
        display: grid;
        gap: 2rem;
        grid-template-columns: 1fr;
    }

    @media (min-width: 768px) {
        .events-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        .hero h1 {
            font-size: 3.5rem;
        }
    }
    
    @media (min-width: 1024px) {
        .events-grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    .shabbat-section {
        padding-block: 5rem;
        background-color: var(--color-warm-wood);
        color: var(--color-white);
        text-align: center;
    }
    
    .shabbat-section h2 {
        color: var(--color-white);
    }

    .shabbat-content p {
        font-size: 1.1rem;
        max-width: 600px;
        margin-inline: auto;
        margin-block-end: 2rem;
    }

    .shabbat-actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
    }
    
    /* Ensure the non-primary button in Shabbat section stands out better on wood bg */
    .shabbat-actions .button:not(.button-primary) {
        background-color: var(--color-sand);
        color: var(--color-text);
        text-decoration: none;
    }
    .shabbat-actions .button:not(.button-primary):hover {
        background-color: var(--color-white);
        text-decoration: none;
    }
</style>
