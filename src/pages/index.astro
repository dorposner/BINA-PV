---
import Layout from '../layouts/Layout.astro';
import EventCard from '../components/EventCard.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

import treeImg from '../assets/images/tree.png';
import slothImg from '../assets/images/sloth.png';
import shabbatImg from '../assets/images/shabbat.png';
import passoverImg from '../assets/images/passover.png';

const events = await getCollection('events');
// Sort by date ascending
const sortedEvents = events.sort((a, b) => a.data.date.valueOf() - b.data.date.valueOf());
---

<Layout title="ראשי">
    <section class="hero">
        <div class="container hero-content">
            <h1>הבית הישראלי שלכם בקוסטה ריקה</h1>
            <p>מוזמנים להצטרף אלינו לפעילויות, ארוחות שבת, סדנאות ועוד בלב פוארטו ויאחו.</p>
            <a href="#schedule" class="button button-primary cta-button">ללוח האירועים שלנו</a>
        </div>
        <div class="hero-overlay"></div>
    </section>

    <section id="about" class="about-section">
        <div class="container about-container">
            <div class="container">
               <h2>אודותינו</h2>
                <p><strong>נעים להכיר! אנחנו משפחת פוזנר – קרן, דור, והבנות גילי ורותם.</strong><br>
            כבר למעלה משנתיים שאנחנו נמצאים במסע חובק עולם. טיילנו בהודו, תאילנד, סינגפור, לאוס, וייטנאם, הפיליפינים, הונג קונג, טייוואן, יפן, ארצות הברית, הבהאמס ומקסיקו, ועכשיו – הגענו לקוסטה ריקה במטרה להקים בית חם למטיילים ישראלים בפוארטו וייחו.</p>

                <p>חברנו לארגון בינ"ה כדי ליצור יחד מרחב שמאפשר לישראלים להרגיש בבית, רחוק מהבית. אנחנו מזמינים אתכם להצטרף אלינו לפעילויות, לקחת חלק בעשייה, או פשוט לבוא לשבת ולהרגיש ביחד. נהיה כאן לתקופה קצרה וקסומה של שלושה חודשים בלבד (מרץ, אפריל ומאי 2026) – אז אם אתם מטיילים במרכז אמריקה בתקופה הקרובה, תכננו קפיצה לפוארטו וייחו ובואו להתארח אצלנו!</p>

                <h3 style="margin-top: 2rem;">קצת על ארגון בינ"ה</h3>
                <p>בינ"ה (התנועה ליהדות חברתית) פועלת לקידום זהות יהודית-ישראלית המבוססת על קהילה, תרבות ועשייה. הבתים של בינ"ה ברחבי העולם משמשים כמוקדי מפגש ייחודיים למטיילים, ומציעים מרחב פתוח, פלורליסטי ומקבל לציון שבתות וחגים, למידה משותפת וחיבור אותנטי לישראליות – באווירה שמזמינה פנימה כל אחת ואחד.</p>
            </div>
            <div class="about-images">
                <Image src={slothImg} alt="Sloth in Puerto Viejo" class="about-img main-about-img" />
            </div>
        </div>
    </section>

    <section id="schedule" class="schedule-section">
        <div class="container">
            <h2>לוח אירועים שבועי</h2>
            <div class="events-grid">
                {sortedEvents.length > 0 ? (
                    sortedEvents.map(event => (
                        <EventCard event={event} />
                    ))
                ) : (
                    <p>לא נמצאו אירועים קרובים כרגע.</p>
                )}
            </div>
        </div>
    </section>

    <section id="shabbat-passover" class="shabbat-section">
        <div class="container shabbat-container">
            <div class="shabbat-image-wrapper">
                 <Image src={shabbatImg} alt="Shabbat Dinner" class="shabbat-img round-img" />
            </div>
            <div class="shabbat-content">
                <h2>שבת בבית BINA</h2>
                <p>
                    מזמינים אתכם לחגוג איתנו את השבת באווירה המיוחדת של קוסטה ריקה.
                    אנא הירשמו מראש כדי שנוכל להיערך בהתאם.
                </p>
                <div class="shabbat-actions">
                    <a href="https://forms.gle/zRwQTjPmdCikY2Dd7" class="button button-primary" target="_blank" rel="noopener noreferrer">הזמנת ארוחת שבת</a>
                </div>
            </div>
        </div>
    </section>

    <section id="passover" class="passover-section">
        <div class="container shabbat-container passover-container">
            <div class="shabbat-content passover-content">
                <h2>פסח מתקרב!</h2>
                <p>
                    הצטרפו אלינו לחגיגת ליל הסדר ולימי הפסח בפוארטו ויאחו.
                    הבטיחו את מקומכם מראש.
                </p>
                <div class="shabbat-actions passover-actions">
                    <a href="https://bit.ly/4aGlgUY" class="button button-primary" target="_blank" rel="noopener noreferrer">הרשמה לפסח</a>
                </div>
            </div>
            <div class="shabbat-image-wrapper">
                 <Image src={passoverImg} alt="Passover Celebration" class="shabbat-img round-img" />
            </div>
        </div>
    </section>
</Layout>

<style>
    .hero {
        position: relative;
        background-color: var(--color-brand-blue);
        min-height: 80vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: var(--color-white);
        margin-block-start: -1px; /* Overlap header box-shadow */
        overflow: hidden;
    }

    .hero-bg-image {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 0;
    }

    .hero-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 140, 255, 0.4); /* Brand blue with opacity */
        z-index: 1;
    }

    .hero-content {
        position: relative;
        z-index: 2;
        max-width: 800px;
    }

    .hero h1 {
        font-size: 2.5rem;
        margin-block-end: 1rem;
        color: var(--color-white);
        line-height: 1.2;
    }

    .hero p {
        font-size: 1.25rem;
        margin-block-end: 2rem;
    }

    .cta-button {
        font-size: 1.25rem;
        padding: 1rem 2rem;
    }

    .about-section {
        padding-block: 5rem;
        background-color: var(--color-white);
    }

    .about-container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 3rem;
        align-items: center;
    }

    @media (min-width: 900px) {
        .about-container {
            grid-template-columns: 1fr 1fr;
        }
    }

    .about-text h2 {
        font-size: 2rem;
        margin-block-end: 1.5rem;
    }

    .about-text p {
        font-size: 1.15rem;
        line-height: 1.7;
        color: var(--color-text);
    }
    
    .about-images {
        position: relative;
        min-height: 350px;
    }

    .about-img {
        border-radius: 12px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        object-fit: cover;
    }

    .main-about-img {
        width: 100%;
        height: 350px;
        position: relative;
        z-index: 2;
    }

    .schedule-section {
        padding-block: 4rem;
        background-color: var(--color-sand-light);
    }

    .events-grid {
        display: grid;
        gap: 2rem;
        grid-template-columns: 1fr;
    }

    @media (min-width: 768px) {
        .events-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        .hero h1 {
            font-size: 3.5rem;
        }
    }
    
    @media (min-width: 1024px) {
        .events-grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    .shabbat-section {
        padding-block: 5rem;
        background-color: var(--color-brand-green);
        color: var(--color-white);
    }
    
    .passover-section {
        padding-block: 5rem;
        background-color: var(--color-brand-blue);
        color: var(--color-white);
    }

    .shabbat-container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 3rem;
        align-items: center;
    }

    @media (min-width: 900px) {
        .shabbat-container {
            grid-template-columns: auto 1fr;
        }
        .passover-container {
            grid-template-columns: 1fr auto;
        }
    }

    .shabbat-image-wrapper {
        text-align: center;
    }

    .round-img {
        width: 100%;
        max-width: 350px;
        height: auto;
        border-radius: 50%;
        border: 4px solid var(--color-white);
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        object-fit: cover;
        aspect-ratio: 1;
    }

    .shabbat-content {
        text-align: start;
    }
    
    @media (max-width: 899px) {
        .shabbat-content {
            text-align: center;
        }
        .shabbat-actions {
            justify-content: center;
        }
    }

    .shabbat-section h2, .passover-section h2 {
        color: var(--color-text-bright);
        font-size: 2.2rem;
        margin-block-end: 1rem;
    }

    .shabbat-content p {
        font-size: 1.15rem;
        color: var(--color-white);
        max-width: 600px;
        margin-block-end: 2rem;
        line-height: 1.6;
    }
    
    .passover-content p {
        font-size: 1.15rem;
        color: var(--color-text-bright);
        max-width: 600px;
        margin-block-end: 2rem;
        line-height: 1.6;
    }

    .shabbat-actions {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }
    
    .passover-actions .button {
        background-color: var(--color-brand-red);
        color: var(--color-white);
    }
    
    .passover-actions .button:hover {
        opacity: 0.9;
    }
    
    /* Ensure the non-primary button in Shabbat section stands out better on wood bg */
    .shabbat-actions .button:not(.button-primary) {
        background-color: var(--color-sand);
        color: var(--color-text);
        text-decoration: none;
    }
    .shabbat-actions .button:not(.button-primary):hover {
        background-color: var(--color-white);
        text-decoration: none;
    }
</style>
